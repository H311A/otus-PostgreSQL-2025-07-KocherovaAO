```
–û–∫—Ä—É–∂–µ–Ω–∏–µ: Oracle Linux 8.10, PostgreSQL 17.
```
# –†–∞–±–æ—Ç–∞ —Å join'–∞–º–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.

–ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞—é —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –Ω–∞–ø–æ–ª–Ω—è—é –∏—Ö –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –æ—Ç—Ä–∞–±–æ—Ç–∫–∏ —Ç–∏–ø–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:
```sql
-- –¢–∞–±–ª–∏—Ü–∞ "departments"
CREATE TABLE departments (
    dept_id SERIAL PRIMARY KEY,
    dept_name VARCHAR(50) NOT NULL
);

-- –¢–∞–±–ª–∏—Ü–∞ "employees"
CREATE TABLE employees (
    emp_id SERIAL PRIMARY KEY,
    emp_name VARCHAR(50) NOT NULL,
    dept_id INT,
    salary INT
);

-- –í—Å—Ç–∞–≤–ª—è—é –¥–∞–Ω–Ω—ã–µ –≤ "departments"
INSERT INTO departments (dept_name) VALUES
('–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞'),
('–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥'),
('–ü—Ä–æ–¥–∞–∂–∏'),
('–ü–æ–¥–¥–µ—Ä–∂–∫–∞'); -- –≠—Ç–æ—Ç –æ—Ç–¥–µ–ª –ø–æ–∫–∞ –±–µ–∑ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

-- –í—Å—Ç–∞–≤–ª—è—é –¥–∞–Ω–Ω—ã–µ –≤ "employees"
INSERT INTO employees (emp_name, dept_id, salary) VALUES
('–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤', 1, 100000),
('–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤', 1, 95000),
('–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞', 2, 80000),
('–ê–Ω–Ω–∞ –ö–æ–∑–ª–æ–≤–∞', 3, 75000),
('–°–µ—Ä–≥–µ–π –°–µ—Ä–≥–µ–µ–≤', NULL, 60000); -- –≠—Ç–æ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–∫–∞ –Ω–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω –∫ –æ—Ç–¥–µ–ª—É
```
–¢–∞–±–ª–∏—Ü–∞ `departments` —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ç–¥–µ–ª–∞—Ö, –∞ `employees` - –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö. –ü–æ–ª–µ `dept_id` –≤ `employees` —è–≤–ª—è–µ—Ç—Å—è –≤–Ω–µ—à–Ω–∏–º –∫–ª—é—á–æ–º, —Å–≤—è–∑—ã–≤–∞—é—â–∏–º –µ–µ —Å `departments`. 

## 1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä—è–º–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (INNER JOIN) –¥–≤—É—Ö –∏–ª–∏ –±–æ–ª–µ–µ —Ç–∞–±–ª–∏—Ü.
```sql
SELECT e.emp_name, d.dept_name
FROM employees e
INNER JOIN departments d ON e.dept_id = d.dept_id;
```
`INNER JOIN` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ –æ–±–µ–∏—Ö —Ç–∞–±–ª–∏—Ü, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö —É—Å–ª–æ–≤–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è `(e.dept_id = d.dept_id)` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è. –ú—ã –≤–∏–¥–∏–º —Ç–æ–ª—å–∫–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –æ—Ç–¥–µ–ª–∞–º.
```sql
    emp_name    | dept_name
----------------+------------
 –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤    | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
 –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤    | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
 –ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞ | –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥
 –ê–Ω–Ω–∞ –ö–æ–∑–ª–æ–≤–∞   | –ü—Ä–æ–¥–∞–∂–∏
(4 —Å—Ç—Ä–æ–∫–∏)
```
## 2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–µ–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ (LEFT OUTER JOIN) —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –∏–ª–∏ –±–æ–ª–µ–µ —Ç–∞–±–ª–∏—Ü.
```sql
SELECT e.emp_name, d.dept_name
FROM employees e
LEFT OUTER JOIN departments d ON e.dept_id = d.dept_id;
```
`LEFT JOIN` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ –ª–µ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã `employees`, –¥–∞–∂–µ –µ—Å–ª–∏ –¥–ª—è –Ω–∏—Ö –Ω–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –≤ –ø—Ä–∞–≤–æ–π —Ç–∞–±–ª–∏—Ü–µ `departments`. –î–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –±–µ–∑ –æ—Ç–¥–µ–ª–∞ –≤ —Å—Ç–æ–ª–±—Ü–∞—Ö –∏–∑ `departments` –±—É–¥—É—Ç –∑–Ω–∞—á–µ–Ω–∏—è `NULL`. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã, –¥–∞–∂–µ –µ—Å–ª–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.
```sql
    emp_name    | dept_name
----------------+------------
 –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤    | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
 –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤    | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
 –ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞ | –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥
 –ê–Ω–Ω–∞ –ö–æ–∑–ª–æ–≤–∞   | –ü—Ä–æ–¥–∞–∂–∏
 –°–µ—Ä–≥–µ–π –°–µ—Ä–≥–µ–µ–≤ | (NULL)
(5 —Å—Ç—Ä–æ–∫)
```
## 3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—Ä–æ—Å—Å-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (CROSS JOIN) –¥–≤—É—Ö –∏–ª–∏ –±–æ–ª–µ–µ —Ç–∞–±–ª–∏—Ü.
```sql
SELECT e.emp_name, d.dept_name
FROM employees e
CROSS JOIN departments d;
```
`CROSS JOIN` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ–∫–∞—Ä—Ç–æ–≤–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –¥–≤—É—Ö —Ç–∞–±–ª–∏—Ü: –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –∏–∑ `employees` —Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–æ–π –∏–∑ `departments`. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ä–∞–≤–Ω–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫ –≤ –æ–±–µ–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö (5 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –Ω–∞ 4 –æ—Ç–¥–µ–ª–∞ = 20 —Å—Ç—Ä–æ–∫). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—Å–µ–≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π.
```sql
    emp_name    | dept_name
----------------+------------
 –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤    | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
 –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤    | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
 –ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞ | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
 –ê–Ω–Ω–∞ –ö–æ–∑–ª–æ–≤–∞   | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
 –°–µ—Ä–≥–µ–π –°–µ—Ä–≥–µ–µ–≤ | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
 –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤    | –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥
 –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤    | –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥
 –ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞ | –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥
 –ê–Ω–Ω–∞ –ö–æ–∑–ª–æ–≤–∞   | –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥
 –°–µ—Ä–≥–µ–π –°–µ—Ä–≥–µ–µ–≤ | –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥
 –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤    | –ü—Ä–æ–¥–∞–∂–∏
 –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤    | –ü—Ä–æ–¥–∞–∂–∏
 –ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞ | –ü—Ä–æ–¥–∞–∂–∏
 –ê–Ω–Ω–∞ –ö–æ–∑–ª–æ–≤–∞   | –ü—Ä–æ–¥–∞–∂–∏
 –°–µ—Ä–≥–µ–π –°–µ—Ä–≥–µ–µ–≤ | –ü—Ä–æ–¥–∞–∂–∏
 –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤    | –ü–æ–¥–¥–µ—Ä–∂–∫–∞
 –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤    | –ü–æ–¥–¥–µ—Ä–∂–∫–∞
 –ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞ | –ü–æ–¥–¥–µ—Ä–∂–∫–∞
 –ê–Ω–Ω–∞ –ö–æ–∑–ª–æ–≤–∞   | –ü–æ–¥–¥–µ—Ä–∂–∫–∞
 –°–µ—Ä–≥–µ–π –°–µ—Ä–≥–µ–µ–≤ | –ü–æ–¥–¥–µ—Ä–∂–∫–∞
(20 —Å—Ç—Ä–æ–∫)
```
## 4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (FULL OUTER JOIN) –¥–≤—É—Ö –∏–ª–∏ –±–æ–ª–µ–µ —Ç–∞–±–ª–∏—Ü.
```sql
SELECT e.emp_name, d.dept_name
FROM employees e
FULL OUTER JOIN departments d ON e.dept_id = d.dept_id;
```
`FULL JOIN` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ –æ–±–µ–∏—Ö —Ç–∞–±–ª–∏—Ü. –ï—Å–ª–∏ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ—Ç –æ—Ç–¥–µ–ª–∞, –ø–æ–ª—è –æ—Ç–¥–µ–ª–∞ –±—É–¥—É—Ç `NULL`. –ï—Å–ª–∏ –¥–ª—è –æ—Ç–¥–µ–ª–∞ –Ω–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –ø–æ–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –±—É–¥—É—Ç `NULL`. –≠—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞ —Å–≤—è–∑–µ–π.
```sql
    emp_name    | dept_name
----------------+------------
 –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤    | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
 –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤    | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
 –ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞ | –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥
 –ê–Ω–Ω–∞ –ö–æ–∑–ª–æ–≤–∞   | –ü—Ä–æ–¥–∞–∂–∏
 –°–µ—Ä–≥–µ–π –°–µ—Ä–≥–µ–µ–≤ | (NULL)
 (NULL)         | –ü–æ–¥–¥–µ—Ä–∂–∫–∞
(6 —Å—Ç—Ä–æ–∫)
```
## 5. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.
–°–æ–∑–¥–∞–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É `projects` —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏. 
```sql
CREATE TABLE projects (
    project_id SERIAL PRIMARY KEY,
    project_name VARCHAR(50),
    emp_id INT
);

INSERT INTO projects (project_name, emp_id) VALUES
('–ü—Ä–æ–µ–∫—Ç –ê', 1),
('–ü—Ä–æ–µ–∫—Ç –ë', 2),
('–ü—Ä–æ–µ–∫—Ç –í', 9);
```
#### 5.1 INNER JOIN + LEFT JOIN. –ù–∞–π–¥—É –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –æ—Ç–¥–µ–ª, –∏ –ø–æ–∫–∞–∂—É –∏—Ö –ø—Ä–æ–µ–∫—Ç—ã (–¥–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–µ—Ç):
```sql
SELECT e.emp_name, d.dept_name, p.project_name
FROM employees e
INNER JOIN departments d ON e.dept_id = d.dept_id    -- –¢–æ–ª—å–∫–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Å –æ—Ç–¥–µ–ª–æ–º
LEFT JOIN projects p ON e.emp_id = p.emp_id;         -- –ù–æ –≤—Å–µ –∏—Ö –ø—Ä–æ–µ–∫—Ç—ã
```
–°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –±–µ–∑ –æ—Ç–¥–µ–ª–æ–≤ (–∫–∞–∫ –°–µ—Ä–≥–µ–µ–≤) –Ω–µ –±—É–¥–µ—Ç, –Ω–æ —É —Ç–µ—Ö, –∫—Ç–æ –µ—Å—Ç—å, –±—É–¥—É—Ç –≤—Å–µ –∏—Ö –ø—Ä–æ–µ–∫—Ç—ã, –∞ –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–µ—Ç - NULL:
```sql
    emp_name    | dept_name  | project_name
----------------+------------+--------------
 –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤    | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | –ü—Ä–æ–µ–∫—Ç –ê
 –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤    | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | –ü—Ä–æ–µ–∫—Ç –ë
 –ê–Ω–Ω–∞ –ö–æ–∑–ª–æ–≤–∞   | –ü—Ä–æ–¥–∞–∂–∏    | (NULL)
 –ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞ | –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥  | (NULL)
(4 —Å—Ç—Ä–æ–∫–∏)
```
#### 5.2 FULL JOIN + LEFT JOIN. –Ø —Ö–æ—á—É –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –∏ –æ—Ç–¥–µ–ª–∞–º, –∞ –¥–ª—è —Ç–µ—Ö, —É –∫–æ–≥–æ –µ—Å—Ç—å –æ—Ç–¥–µ–ª, –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã:
```sql
SELECT e.emp_name, d.dept_name, p.project_name
FROM employees e
FULL JOIN departments d ON e.dept_id = d.dept_id     -- –í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏ –≤—Å–µ –æ—Ç–¥–µ–ª—ã
LEFT JOIN projects p ON e.emp_id = p.emp_id          -- –í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏ –≤—Å–µ –æ—Ç–¥–µ–ª—ã
```
–ü–æ–ª—É—á–∞—é –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–¥–∞–∂–µ –±–µ–∑ –æ—Ç–¥–µ–ª–∞), –≤—Å–µ –æ—Ç–¥–µ–ª—ã (–¥–∞–∂–µ –±–µ–∑ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤), –∏ –ø—Ä–æ–µ–∫—Ç—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Ö –∑–∞–ø–∏—Å–µ–π, –≥–¥–µ –±—ã–ª —Ä–µ–∞–ª—å–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ (–∏–∑ –ª–µ–≤–æ–π —á–∞—Å—Ç–∏ FULL JOIN):
```sql
    emp_name    | dept_name  | project_name
----------------+------------+--------------
 –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤    | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | –ü—Ä–æ–µ–∫—Ç –ê
 –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤    | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | –ü—Ä–æ–µ–∫—Ç –ë
 (NULL)         | –ü–æ–¥–¥–µ—Ä–∂–∫–∞  | (NULL)
 –°–µ—Ä–≥–µ–π –°–µ—Ä–≥–µ–µ–≤ | (NULL)     | (NULL)
 –ê–Ω–Ω–∞ –ö–æ–∑–ª–æ–≤–∞   | –ü—Ä–æ–¥–∞–∂–∏    | (NULL)
 –ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞ | –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥  | (NULL)
(6 —Å—Ç—Ä–æ–∫)
```
#### 5.3 CROSS JOIN + LEFT JOIN. –Ø —Ö–æ—á—É —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ç—Ä–∏—Ü—É "–≤—Å–µ –æ—Ç–¥–µ–ª—ã vs –≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã" –∏ –ø–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –º–æ–≥ –±—ã –±—ã—Ç—å –∏—Ö —Å–≤—è–∑—É—é—â–∏–º –∑–≤–µ–Ω–æ–º, –µ—Å–ª–∏ –±—ã –æ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª.
```sql
SELECT d.dept_name, p.project_name, e.emp_name
FROM departments d
CROSS JOIN projects p                               -- –í—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –æ—Ç–¥–µ–ª–æ–≤ –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤                 
LEFT JOIN employees e ON d.dept_id = e.dept_id      -- –ü–æ–ø—ã—Ç–∫–∞ –Ω–∞–π—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –≤ –æ—Ç–¥–µ–ª–µ
AND e.emp_id = p.emp_id;                            -- –ö–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–º–µ–Ω–Ω–æ –Ω–∞–¥ —ç—Ç–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º
```
–Ø –ø–æ–ª—É—á–∞—é –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–∞—Ä—ã "–æ—Ç–¥–µ–ª-–ø—Ä–æ–µ–∫—Ç". –î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø–∞—Ä –≤ `emp_name` –±—É–¥–µ—Ç `NULL`, —Ç–∞–∫ –∫–∞–∫ —Ç–∞–∫–æ–π —Å–≤—è–∑–∫–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ù–æ –µ—Å–ª–∏ –≤ –æ—Ç–¥–µ–ª–µ –µ—Å—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º, –µ–≥–æ –∏–º—è –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω–æ:
```sql
 dept_name  | project_name |  emp_name
------------+--------------+-------------
 –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | –ü—Ä–æ–µ–∫—Ç –ê     | –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
 –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | –ü—Ä–æ–µ–∫—Ç –ë     | –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤
 –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ | –ü—Ä–æ–µ–∫—Ç –í     | (NULL)
 –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥  | –ü—Ä–æ–µ–∫—Ç –ê     | (NULL)
 –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥  | –ü—Ä–æ–µ–∫—Ç –ë     | (NULL)
 –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥  | –ü—Ä–æ–µ–∫—Ç –í     | (NULL)
 –ü—Ä–æ–¥–∞–∂–∏    | –ü—Ä–æ–µ–∫—Ç –ê     | (NULL)
 –ü—Ä–æ–¥–∞–∂–∏    | –ü—Ä–æ–µ–∫—Ç –ë     | (NULL)
 –ü—Ä–æ–¥–∞–∂–∏    | –ü—Ä–æ–µ–∫—Ç –í     | (NULL)
 –ü–æ–¥–¥–µ—Ä–∂–∫–∞  | –ü—Ä–æ–µ–∫—Ç –ê     | (NULL)
 –ü–æ–¥–¥–µ—Ä–∂–∫–∞  | –ü—Ä–æ–µ–∫—Ç –ë     | (NULL)
 –ü–æ–¥–¥–µ—Ä–∂–∫–∞  | –ü—Ä–æ–µ–∫—Ç –í     | (NULL)
(12 —Å—Ç—Ä–æ–∫)
```

### –ó–∞–¥–∞—á–∞ —Å–æ –∑–≤—ë–∑–¥–æ—á–∫–æ–π. 
–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–ª—é –∫–ª–∞—Å—Ç–µ—Ä. –í `postgresql.conf` –∏–∑–º–µ–Ω—è—é:
```sql
shared_preload_libraries = 'pg_stat_statements'
track_io_timing = on  # –í–∫–ª—é—á–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ I/O
```
–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é —Å–µ—Ä–≤–µ—Ä. –°–æ–∑–¥–∞—é —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
```sql
postgres=# CREATE EXTENSION IF NOT EXISTS pg_stat_statements;
CREATE EXTENSION
```
#### –ú–µ—Ç—Ä–∏–∫–∞ 1. 15 —Å–∞–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–µ–º–∫–∏—Ö JOIN-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ, –∞–Ω–∞–ª–∏–∑ –∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Ç–∞–±–ª–∏—Ü.
```sql
SELECT 
    queryid as "ID",
    calls as "–í—ã–∑–æ–≤—ã",
    round(total_exec_time::numeric, 2) as "–û–±—â–µ–µ –≤—Ä–µ–º—è –º—Å",
    round(mean_exec_time::numeric, 2) as "–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –º—Å",
    rows as "–°—Ç—Ä–æ–∫",
    CASE 
        WHEN mean_exec_time > 100 THEN 'üî¥ ' || round(mean_exec_time::numeric, 2)
        WHEN mean_exec_time > 10 THEN 'üü° ' || round(mean_exec_time::numeric, 2)
        WHEN mean_exec_time > 1 THEN 'üü¢ ' || round(mean_exec_time::numeric, 2)
        ELSE '‚úÖ ' || round(mean_exec_time::numeric, 2)
    END as "–í—Ä–µ–º—è",
    CASE 
        WHEN mean_exec_time > 10 AND calls > 5 THEN 'üî¥ –ú–µ–¥–ª–µ–Ω–Ω–æ + —á–∞—Å—Ç–æ'
        WHEN rows > 1000 AND mean_exec_time > 5 THEN 'üü° –ú–Ω–æ–≥–æ –¥–∞–Ω–Ω—ã—Ö + –º–µ–¥–ª–µ–Ω–Ω–æ'
        WHEN calls > 100 AND mean_exec_time > 1 THEN 'üü° –ß–∞—Å—Ç–æ + –º–µ–¥–ª–µ–Ω–Ω–æ'
        ELSE '‚úÖ –ù–æ—Ä–º–∞'
    END as "–ü—Ä–æ–±–ª–µ–º–∞",
    CASE 
        WHEN query LIKE '%JOIN%JOIN%JOIN%' THEN 'üî¥ –ú–Ω–æ–≥–æ JOIN'
        WHEN query LIKE '%WHERE%.% = %.%' THEN '‚úÖ –ò–Ω–¥–µ–∫—Å–Ω—ã–π JOIN'
        WHEN query LIKE '%WHERE%IS NOT NULL%' THEN 'üü° –§–∏–ª—å—Ç—Ä –ø–µ—Ä–µ–¥ JOIN'
        ELSE '‚ö™ –û–±—ã—á–Ω—ã–π JOIN'
    END as "–¢–∏–ø JOIN"
FROM pg_stat_statements 
WHERE query LIKE '%JOIN%' 
AND query NOT LIKE '%pg_stat_%'
AND mean_exec_time > 1
ORDER BY (total_exec_time * calls) DESC
LIMIT 15;
```
–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```sql
          ID          | –í—ã–∑–æ–≤—ã | –û–±—â–µ–µ –≤—Ä–µ–º—è –º—Å | –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –º—Å | –°—Ç—Ä–æ–∫ |   –í—Ä–µ–º—è   | –ü—Ä–æ–±–ª–µ–º–∞ |     –¢–∏–ø JOIN
----------------------+--------+----------------+------------------+-------+-----------+----------+-------------------
 -8917144814669508499 |      1 |         220.55 |           220.55 |   499 | üî¥ 220.55 | ‚úÖ –ù–æ—Ä–º–∞ | ‚ö™ –û–±—ã—á–Ω—ã–π JOIN
 -4269329529793253551 |      1 |          18.95 |            18.95 |   300 | üü° 18.95  | ‚úÖ –ù–æ—Ä–º–∞ | üî¥ –ú–Ω–æ–≥–æ JOIN
 -2378463660404591078 |      1 |          13.03 |            13.03 |   500 | üü° 13.03  | ‚úÖ –ù–æ—Ä–º–∞ | ‚ö™ –û–±—ã—á–Ω—ã–π JOIN
  1834376733575628938 |      1 |          12.42 |            12.42 |   500 | üü° 12.42  | ‚úÖ –ù–æ—Ä–º–∞ | ‚ö™ –û–±—ã—á–Ω—ã–π JOIN
 -2428091786180286149 |      1 |           2.40 |             2.40 |   500 | üü¢ 2.40   | ‚úÖ –ù–æ—Ä–º–∞ | ‚úÖ –ò–Ω–¥–µ–∫—Å–Ω—ã–π JOIN
  7398335915666730765 |      1 |           1.21 |             1.21 |   200 | üü¢ 1.21   | ‚úÖ –ù–æ—Ä–º–∞ | ‚úÖ –ò–Ω–¥–µ–∫—Å–Ω—ã–π JOIN

```

#### –ú–µ—Ç—Ä–∏–∫–∞ 2. –ê–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏–Ω–¥–µ–∫—Å–æ–≤ (–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–Ω–∏–º–∞—é—Ç –º–µ—Å—Ç–æ, –Ω–æ –Ω–∏–∫–æ–≥–¥–∞ –∏–ª–∏ –æ—á–µ–Ω—å —Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è).
```sql
SELECT
    relname as "–¢–∞–±–ª–∏—Ü–∞",
    indexrelname as "–ò–Ω–¥–µ–∫—Å",
    pg_size_pretty(pg_relation_size(indexrelid)) as "–†–∞–∑–º–µ—Ä",
    idx_scan as "–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π",
    CASE
        WHEN idx_scan = 0 THEN '‚ùå –ù–∏–∫–æ–≥–¥–∞'
        WHEN idx_scan < 10 THEN 'üü° –†–µ–¥–∫–æ'
        WHEN idx_scan < 100 THEN 'üü¢ –ò–Ω–æ–≥–¥–∞'
        ELSE '‚úÖ –ß–∞—Å—Ç–æ'
    END as "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ",
    CASE
        WHEN idx_scan = 0 AND pg_relation_size(indexrelid) > 1048576 THEN 'üóëÔ∏è –£–¥–∞–ª–∏—Ç—å'
        WHEN idx_scan < 100 AND pg_relation_size(indexrelid) > 1048576 THEN 'üëÄ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å'
        ELSE '‚úÖ OK'
    END as "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è"
FROM
    pg_stat_all_indexes
WHERE
    schemaname NOT IN ('pg_catalog', 'pg_toast', 'information_schema')
ORDER BY
    pg_relation_size(indexrelid) DESC,
    idx_scan ASC
LIMIT 15;
```
–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```sql
     –¢–∞–±–ª–∏—Ü–∞    |           –ò–Ω–¥–µ–∫—Å           | –†–∞–∑–º–µ—Ä  | –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
---------------+----------------------------+---------+--------------+---------------+--------------
 products      | products_pkey              | 21 MB   |          885 | ‚úÖ –ß–∞—Å—Ç–æ      | ‚úÖ OK
 products      | idx_products_category      | 6848 kB |            0 | ‚ùå –ù–∏–∫–æ–≥–¥–∞    | üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
 products      | idx_products_supplier_id   | 6816 kB |            0 | ‚ùå –ù–∏–∫–æ–≥–¥–∞    | üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
 deadlock_test | deadlock_test_pkey         | 6600 kB |            0 | ‚ùå –ù–∏–∫–æ–≥–¥–∞    | üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
 clients       | clients_pkey               | 5496 kB |          152 | ‚úÖ –ß–∞—Å—Ç–æ      | ‚úÖ OK
 clients       | idx_clients_status         | 1728 kB |            0 | ‚ùå –ù–∏–∫–æ–≥–¥–∞    | üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
 order_items   | order_items_pkey           | 672 kB  |            0 | ‚ùå –ù–∏–∫–æ–≥–¥–∞    | ‚úÖ OK
 order_items   | idx_order_items_order_id   | 448 kB  |            6 | üü° –†–µ–¥–∫–æ      | ‚úÖ OK
 order_items   | idx_order_items_product_id | 240 kB  |            2 | üü° –†–µ–¥–∫–æ      | ‚úÖ OK
 orders        | orders_pkey                | 240 kB  |            6 | üü° –†–µ–¥–∫–æ      | ‚úÖ OK
 orders        | idx_orders_date            | 96 kB   |            1 | üü° –†–µ–¥–∫–æ      | ‚úÖ OK
 suppliers     | suppliers_pkey             | 72 kB   |           51 | üü¢ –ò–Ω–æ–≥–¥–∞     | ‚úÖ OK
 projects      | idx_projects_emp_id        | 16 kB   |            0 | ‚ùå –ù–∏–∫–æ–≥–¥–∞    | ‚úÖ OK
 test_locks    | test_locks_pkey            | 16 kB   |            0 | ‚ùå –ù–∏–∫–æ–≥–¥–∞    | ‚úÖ OK
 departments   | departments_pkey           | 16 kB   |            0 | ‚ùå –ù–∏–∫–æ–≥–¥–∞    | ‚úÖ OK
```
### –ú–µ—Ç—Ä–∏–∫–∞ 3. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –æ—á–∏—Å—Ç–∫–∏ (VACUUM –∏ AUTOVACUUM).
```sql
SELECT
    relname AS "–¢–∞–±–ª–∏—Ü–∞",
    n_live_tup AS "–ñ–∏–≤—ã—Ö",
    n_dead_tup AS "–ú—ë—Ä—Ç–≤—ã—Ö",
    pg_size_pretty(pg_table_size(relid)) AS "–†–∞–∑–º–µ—Ä",
    CASE 
        WHEN last_autovacuum IS NULL THEN '–ù–∏–∫–æ–≥–¥–∞'
        ELSE (now() - last_autovacuum::timestamp)::text
    END AS "–ü–æ—Å–ª–µ–¥–Ω–∏–π autovacuum",
    CASE
        WHEN n_dead_tup = 0 THEN '‚úÖ'
        WHEN n_dead_tup > 0 AND n_dead_tup <= 100 THEN '‚ö†Ô∏è '
        WHEN n_dead_tup > 100 THEN '‚ùå'
        ELSE '‚ùì'
    END AS "–°"
FROM
    pg_stat_user_tables
WHERE
    n_dead_tup > 0 OR last_autovacuum IS NOT NULL
ORDER BY
    n_dead_tup DESC
LIMIT 10;
```
–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞: 
```sql
   –¢–∞–±–ª–∏—Ü–∞   |  –ñ–∏–≤—ã—Ö  | –ú—ë—Ä—Ç–≤—ã—Ö | –†–∞–∑–º–µ—Ä  | –ü–æ—Å–ª–µ–¥–Ω–∏–π autovacuum | –°
-------------+---------+---------+---------+----------------------+----
 orders      |   10000 |       0 | 688 kB  | 03:37:14.569708      | ‚úÖ
 suppliers   |    2500 |       0 | 176 kB  | 03:38:13.86726       | ‚úÖ
 order_items |   30000 |       0 | 1800 kB | 03:37:13.060113      | ‚úÖ
 clients     |  250000 |       0 | 16 MB   | 03:38:14.465631      | ‚úÖ
 products    | 1000000 |       0 | 68 MB   | 03:37:14.026433      | ‚úÖ
```
